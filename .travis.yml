dist: xenial   # required for Python >= 3.7
sudo: required
language: python
python:
  - "3.7"
services:
  - docker
install:
  - pip install coveralls
  - docker-compose build
before_script:
  - docker-compose up -d
#  - docker-compose web python manage.py migrate --noinput
script:
  - docker-compose run --no-deps --rm web python manage.py test
  - docker-compose run web coverage run --source='.' manage.py test
after_success:
  - coveralls